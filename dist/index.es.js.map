{"version":3,"file":"index.es.js","sources":["../node_modules/@eythorsson-dev/common-utils/dist/index.es.js","../src/contextMenuItem.ts","../src/contextMenuOption.ts","../src/contextMenuDivider.ts","../src/helpers/selectNextFocusItem.ts","../src/contextMenuOptionGroup.ts","../src/contextMenu.ts"],"sourcesContent":["var et = Object.defineProperty;\nvar rt = (e, t, r) => t in e ? et(e, t, { enumerable: !0, configurable: !0, writable: !0, value: r }) : e[t] = r;\nvar x = (e, t, r) => (rt(e, typeof t != \"symbol\" ? t + \"\" : t, r), r), V = (e, t, r) => {\n  if (!t.has(e))\n    throw TypeError(\"Cannot \" + r);\n};\nvar u = (e, t, r) => (V(e, t, \"read from private field\"), r ? r.call(e) : t.get(e)), l = (e, t, r) => {\n  if (t.has(e))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  t instanceof WeakSet ? t.add(e) : t.set(e, r);\n}, h = (e, t, r, n) => (V(e, t, \"write to private field\"), n ? n.call(e, r) : t.set(e, r), r);\nvar L = (e, t, r) => (V(e, t, \"access private method\"), r);\nfunction z(e) {\n  return e.nextItem ? [e.nextItem, ...z(e.nextItem)] : [];\n}\nfunction j(e) {\n  return e.firstChildItem ? [\n    e.firstChildItem,\n    ...j(e.firstChildItem),\n    ...z(e.firstChildItem).flatMap((t) => [t, ...j(t)])\n  ] : [];\n}\nfunction H(e, t, r = !1) {\n  var i;\n  if (e == null)\n    return [];\n  if (e.id == t.id)\n    return [t];\n  const n = r ? [] : H(e.firstChildItem, t);\n  if (((i = n.slice(-1)[0]) == null ? void 0 : i.id) == t.id)\n    return [e, ...n];\n  if (e.nextItem)\n    return [e, ...n, ...H(e.nextItem, t)];\n  if (e.parentItem)\n    return [e, ...n, ...H(e.parentItem, t, !0)].filter((o) => o.id != e.parentItem.id);\n  throw Error(\"Something went wrong. Please make sure that the start, and the end has a common parent\");\n}\nfunction nt(e, t) {\n  return H(e, t);\n}\nfunction J(e, t) {\n  if (e.firstChildItem && (t == null ? void 0 : t.ignoreChildren) != !0)\n    return e.firstChildItem;\n  if (e.nextItem)\n    return e.nextItem;\n  function r(n) {\n    if (n.nextItem)\n      return n.nextItem;\n    if (n.parentItem)\n      return r(n.parentItem);\n  }\n  return r(e);\n}\nfunction B(e, t) {\n  function r(n) {\n    if (n.id == t)\n      return n;\n    let i;\n    return n.firstChildItem && (i || (i = r(n.firstChildItem))), n.nextItem && (i || (i = r(n.nextItem))), i;\n  }\n  return r(e);\n}\nfunction Q(e, t) {\n  if (t.contains(e.target))\n    return;\n  function r(n) {\n    let i;\n    return n.firstChildItem && (i || (i = r(n.firstChildItem))), n.nextItem && (i || (i = r(n.nextItem))), n.target.contains(t) && (i || (i = n)), i;\n  }\n  return r(e);\n}\nfunction R(e) {\n  if (!e)\n    return [];\n  const t = [\n    e.getDetails()\n  ];\n  return e.firstChildItem && t.push(...R(e.firstChildItem)), e.nextItem && t.push(...R(e.nextItem)), t;\n}\nfunction it(e) {\n  function t(r) {\n    return r != null && r.nextItem ? t(r.nextItem) : r != null && r.firstChildItem ? t(r.firstChildItem) : r;\n  }\n  return t(e == null ? void 0 : e.firstChildItem);\n}\nfunction X(e, t, r) {\n  var i, o;\n  if (t == null && (e.parentId || e.previousId))\n    throw new Error(\"the initial upsert must be the root window\");\n  let n = t && B(t, e.id);\n  if (n == null || ((i = n.parentItem) == null ? void 0 : i.id) != e.parentId || ((o = n.previousItem) == null ? void 0 : o.id) != e.previousId) {\n    if (t && n && t.id == n.id)\n      if (n.firstChildItem)\n        t = n.firstChildItem;\n      else if (n.nextItem)\n        t = n.nextItem;\n      else\n        throw new Error(\"Failed to render block, a new rootBlock could not be determined\");\n    if (n == null && (n = r(e)), n == null || n.remove(), t == null)\n      t = n;\n    else if (e.previousId) {\n      const s = B(t, e.previousId);\n      if (!s)\n        throw new Error(\"Failed to render item, previous item is not rendered\");\n      s.after(n);\n    } else if (e.parentId) {\n      const s = B(t, e.parentId);\n      if (!s)\n        throw new Error(\"Failed to render item, parent item is not rendered\");\n      s.append(n);\n    } else\n      t.before(n), t = n;\n  }\n  return n.update(e.data), t;\n}\nvar D, S, C, A, p, I, b;\nclass ot {\n  constructor(t, r) {\n    l(this, D, void 0);\n    l(this, S, void 0);\n    l(this, C, void 0);\n    // set parentItem(item: TItem | undefined) { this.#parent = item; }\n    l(this, A, void 0);\n    // set firstChildItem(item: TItem | undefined) { this.#firstChild = item; }\n    l(this, p, void 0);\n    // set nextItem(item: TItem | undefined) { this.#next = item; }\n    l(this, I, void 0);\n    l(this, b, void 0);\n    if (((t == null ? void 0 : t.trim()) ?? \"\").length == 0)\n      throw new Error(\"id is required\");\n    if (((r == null ? void 0 : r.trim()) ?? \"\").length == 0)\n      throw new Error(\"type is required\");\n    h(this, D, t), h(this, S, r);\n  }\n  get id() {\n    return u(this, D);\n  }\n  get type() {\n    return u(this, S);\n  }\n  get parentItem() {\n    return u(this, C);\n  }\n  get firstChildItem() {\n    return u(this, A);\n  }\n  get nextItem() {\n    return u(this, p);\n  }\n  get previousItem() {\n    return u(this, I);\n  }\n  get target() {\n    if (!u(this, b))\n      throw new Error(\"Failed to get target. Please call the .initialized(data) method before fetching the target\");\n    return u(this, b);\n  }\n  init(t) {\n    if (u(this, b))\n      throw new Error(\"The target has already been initialized\");\n    h(this, b, this.render(t));\n  }\n  getDetails() {\n    var t, r;\n    return {\n      id: this.id,\n      type: this.type,\n      parentId: (t = this.parentItem) == null ? void 0 : t.id,\n      previousId: (r = this.previousItem) == null ? void 0 : r.id,\n      data: this.data\n    };\n  }\n  remove() {\n    var t, r, n;\n    ((r = (t = this.parentItem) == null ? void 0 : t.firstChildItem) == null ? void 0 : r.id) == this.id && h(this.parentItem, A, u(this, p)), this.previousItem && h(this.previousItem, p, u(this, p)), this.nextItem && h(this.nextItem, I, u(this, I)), h(this, C, void 0), h(this, p, void 0), h(this, I, void 0), (n = u(this, b)) == null || n.remove();\n  }\n  append(t) {\n    if (t.id == this.id)\n      throw new Error(\"Cannot append item before itself\");\n    if (t.target.contains(this.target))\n      throw new Error(\"Cannot append a parent into one of its children\");\n    t.remove();\n    const r = this.firstChildItem && [this.firstChildItem, ...z(this.firstChildItem)], n = r == null ? void 0 : r.slice(-1)[0];\n    h(t, C, this), n ? n.after(t) : (h(this, A, t), this.target.append(t.target));\n  }\n  before(t) {\n    if (t.id == this.id)\n      throw new Error(\"Cannot append item before itself\");\n    if (t.target.contains(this.target))\n      throw new Error(\"Cannot append a parent into one of its children\");\n    t.remove(), h(t, I, this.previousItem), this.previousItem ? h(this.previousItem, p, t) : this.parentItem && h(this.parentItem, A, t), h(t, C, this.parentItem), h(t, p, this), h(this, I, t), this.target.before(t.target);\n  }\n  after(t) {\n    if (t.id == this.id)\n      throw new Error(\"Cannot append item before itself\");\n    if (t.target.contains(this.target))\n      throw new Error(\"Cannot append a parent into one of its children\");\n    t.remove(), h(t, p, this.nextItem), this.nextItem && h(this.nextItem, I, t), h(t, C, this.parentItem), h(t, I, this), h(this, p, t), this.target.after(t.target);\n  }\n}\nD = new WeakMap(), S = new WeakMap(), C = new WeakMap(), A = new WeakMap(), p = new WeakMap(), I = new WeakMap(), b = new WeakMap();\nfunction F(e, t, r) {\n  const n = e.find((i) => i.parentId == t && i.previousId == r);\n  return n ? (e = e.filter((i) => i.id != n.id), 1 + F(e, n.id, void 0) + F(e, t, n.id)) : 0;\n}\nfunction W(e) {\n  if (e.filter((s) => s.parentId == null && s.previousId == null).length != 1 && e.length > 0)\n    throw new Error(\"Failed to determine the start of the linked list\");\n  if (e.map((s) => s.id).some((s, c, d) => d.indexOf(s) != c))\n    throw new Error(\"Found duplicated instances of ids\");\n  if (e.map((s) => s.previousId + \"_\" + s.parentId).some((s, c, d) => d.indexOf(s) != c))\n    throw new Error(\"Some of the items have the same previousId\");\n  if (F(e) != e.length)\n    throw new Error(\"Linked list is not valid\");\n}\nfunction K(e, t, r) {\n  const n = e.find((i) => i.parentId == t && i.previousId == r);\n  return n ? (e = e.filter((i) => i.id != n.id), [\n    n,\n    ...K(e, n.id, void 0),\n    ...K(e, t, n.id)\n  ]) : [];\n}\nfunction Y(e) {\n  return W(e), K(e, void 0, void 0);\n}\nvar O, a;\nclass st {\n  constructor(t) {\n    l(this, O, void 0);\n    l(this, a, void 0);\n    h(this, O, t);\n  }\n  get rootItem() {\n    return u(this, a);\n  }\n  set rootItem(t) {\n    h(this, a, t);\n  }\n  get activeItem() {\n    if (document.activeElement != null)\n      return Q(u(this, a), document.activeElement);\n  }\n  get value() {\n    return R(u(this, a));\n  }\n  set value(t) {\n    if (W(t), Y(t).length != t.length)\n      throw new Error(\"Cannot set value, invalid linked list\");\n    const n = u(this, a);\n    t.forEach((i, o) => {\n      this.upsert(i), o == 0 && (u(this, O).replaceChildren(u(this, a).target), n == null || n.remove());\n    });\n  }\n  upsert(t) {\n    h(this, a, X(t, u(this, a), () => this.createItem(t.type, t.id, t.data)));\n  }\n  getItemById(t) {\n    return B(u(this, a), t);\n  }\n  deleteItemById(t) {\n    var r, n;\n    if (t == u(this, a).id) {\n      const i = J(this.rootItem);\n      (r = this.getItemById(t)) == null || r.remove(), h(this, a, i);\n    } else\n      (n = this.getItemById(t)) == null || n.remove();\n  }\n}\nO = new WeakMap(), a = new WeakMap();\nvar P;\nclass dt {\n  constructor(t) {\n    l(this, P, void 0);\n    h(this, P, t);\n  }\n  get context() {\n    return u(this, P);\n  }\n}\nP = new WeakMap();\nconst Tt = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  Command: dt,\n  ItemContainerElement: st,\n  ItemElement: ot,\n  getChildAndNextSiblingData: R,\n  getChildItems: j,\n  getItemsBetween: nt,\n  getLastChild: it,\n  getNextItem: J,\n  getNextOrChildById: B,\n  getNextOrChildByTarget: Q,\n  getNextSiblings: z,\n  sortList: Y,\n  upsertAndReturnRoot: X,\n  validateList: W\n}, Symbol.toStringTag, { value: \"Module\" }));\nlet N;\nconst ut = new Uint8Array(16);\nfunction ht() {\n  if (!N && (N = typeof crypto < \"u\" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto), !N))\n    throw new Error(\"crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\");\n  return N(ut);\n}\nconst f = [];\nfor (let e = 0; e < 256; ++e)\n  f.push((e + 256).toString(16).slice(1));\nfunction ct(e, t = 0) {\n  return f[e[t + 0]] + f[e[t + 1]] + f[e[t + 2]] + f[e[t + 3]] + \"-\" + f[e[t + 4]] + f[e[t + 5]] + \"-\" + f[e[t + 6]] + f[e[t + 7]] + \"-\" + f[e[t + 8]] + f[e[t + 9]] + \"-\" + f[e[t + 10]] + f[e[t + 11]] + f[e[t + 12]] + f[e[t + 13]] + f[e[t + 14]] + f[e[t + 15]];\n}\nconst lt = typeof crypto < \"u\" && crypto.randomUUID && crypto.randomUUID.bind(crypto), q = {\n  randomUUID: lt\n};\nfunction ft(e, t, r) {\n  if (q.randomUUID && !t && !e)\n    return q.randomUUID();\n  e = e || {};\n  const n = e.random || (e.rng || ht)();\n  return n[6] = n[6] & 15 | 64, n[8] = n[8] & 63 | 128, ct(n);\n}\nfunction Z() {\n  return ft();\n}\nvar w;\nclass Mt {\n  constructor() {\n    l(this, w, {});\n  }\n  On(t, r) {\n    let n = Z();\n    return u(this, w)[t] = (u(this, w)[t] ?? []).concat({ Id: n, Execute: r }), n;\n  }\n  Once(t, r, n) {\n    var i = Z();\n    return u(this, w)[t] = (u(this, w)[t] ?? []).concat({\n      Id: i,\n      Execute: (o) => {\n        n && n(o) != !0 || (this.Off(t, i), r(o));\n      }\n    }), i;\n  }\n  Off(t, r) {\n    var i;\n    const n = (i = u(this, w)[t]) == null ? void 0 : i.findIndex((o) => o.Id == r);\n    n >= 0 && u(this, w)[t].splice(n, 1);\n  }\n  Emit(t, r) {\n    var i;\n    var n = { preventDefault: !1 };\n    return (i = u(this, w)[t]) == null || i.slice().forEach((o) => o.Execute({\n      ...r,\n      preventDefault() {\n        n.preventDefault = !0;\n      }\n    })), n;\n  }\n}\nw = new WeakMap();\nfunction at(e) {\n  const t = [];\n  var r = -1;\n  function n() {\n    var v, m;\n    if (!c())\n      return;\n    const d = t[r];\n    r--, (v = d.BeforeRedo) == null || v.call(d), d.Undo(), (m = d.OnUndo) == null || m.call(d);\n  }\n  function i() {\n    var v, m;\n    if (s()) {\n      r++;\n      var d = t[r];\n      (v = d.BeforeRedo) == null || v.call(d), d.Redo(), (m = d.OnRedo) == null || m.call(d);\n    }\n  }\n  function o(d) {\n    var v, m;\n    r < t.length - 1 && t.splice(r, t.length - r), t.push({\n      Undo: () => d.Undo(),\n      BeforeUndo: () => {\n        var g;\n        return (g = d.BeforeUndo) == null ? void 0 : g.call(d);\n      },\n      OnUndo: () => {\n        var g;\n        return (g = d.OnUndo) == null ? void 0 : g.call(d);\n      },\n      Redo: () => d.Action(),\n      BeforeRedo: () => {\n        var g;\n        return (g = d.BeforeAction) == null ? void 0 : g.call(d);\n      },\n      OnRedo: () => {\n        var g;\n        return (g = d.OnAction) == null ? void 0 : g.call(d);\n      }\n    }), r = t.length - 1, (v = d.BeforeAction) == null || v.call(d), d.Action(), (m = d.OnAction) == null || m.call(d);\n  }\n  function s() {\n    return r < t.length - 1;\n  }\n  function c() {\n    return r >= 0;\n  }\n  return {\n    get HistoryIndex() {\n      return r;\n    },\n    //AddHistory,\n    Execute: o,\n    Undo: n,\n    Redo: i,\n    CanUndo: c,\n    CanRedo: s\n  };\n}\nclass Lt {\n  constructor(t) {\n    x(this, \"UndoAPI\");\n    x(this, \"BeforeChanged\");\n    x(this, \"OnChanged\");\n    x(this, \"Insert\");\n    x(this, \"Update\");\n    x(this, \"Delete\");\n    this.UndoAPI = at(), this.BeforeChanged = t.BeforeChanged ?? (() => {\n    }), this.OnChanged = t.OnChanged, this.Insert = t.Insert, this.Update = t.Update, this.Delete = t.Delete;\n  }\n  CanUndo() {\n    return this.UndoAPI.CanUndo();\n  }\n  Undo() {\n    this.UndoAPI.Undo();\n  }\n  CanRedo() {\n    return this.UndoAPI.CanRedo();\n  }\n  Redo() {\n    this.UndoAPI.Redo();\n  }\n  get HistoryIndex() {\n    return this.UndoAPI.HistoryIndex;\n  }\n  Save(t) {\n    if (!(t != null && t.Data) || !(t != null && t.UndoData))\n      throw new Error(\"Invalid data or undoData\");\n    this.UndoAPI.Execute({\n      Undo: () => {\n        this.Execute(t.UndoData);\n      },\n      BeforeUndo: () => {\n        this.BeforeChanged(t.UndoData);\n      },\n      OnUndo: () => {\n        this.OnChanged(t.UndoData);\n      },\n      Action: () => {\n        this.Execute(t.Data);\n      },\n      BeforeAction: () => {\n        this.BeforeChanged(t.Data);\n      },\n      OnAction: () => {\n        this.OnChanged(t.Data);\n      }\n    });\n  }\n  Execute(t) {\n    t.items.forEach((r) => ({ Insert: this.Insert, Update: this.Update, Delete: this.Delete })[r.Action](r.Data));\n  }\n}\nfunction pt(e) {\n  return e.reduce(\n    (t, r) => {\n      const n = t.findIndex(\n        (i) => i[0].shortcut == r.shortcut && i.some((o) => o.target.contains(r.target) || r.target.contains(o.target))\n      );\n      return n == -1 ? t.push([r]) : t[n].some((o) => o.target.contains(r.target)) && (t[n] = t[n].filter((o) => o.target.contains(r.target) == !1 && r.target.contains(o.target) == !1).concat(r)), t;\n    },\n    []\n  ).flat();\n}\nfunction G(e) {\n  return [e].flat().map(\n    (t) => [\n      t.ctrl && \"ctrl\",\n      t.shift && \"shift\",\n      t.alt && \"alt\",\n      t.key\n    ].filter((r) => r).join(\"+\")\n  ).join(\",\");\n}\nvar T, M, E, k, y, U;\nclass Nt {\n  constructor(t = 1e3) {\n    l(this, E);\n    l(this, T, []);\n    l(this, M, void 0);\n    l(this, y, []);\n    l(this, U, void 0);\n    h(this, M, t);\n  }\n  registerShortcut(t, r, n, i) {\n    u(this, T).push({\n      target: t,\n      shortcut: G(r),\n      action: n,\n      get disabled() {\n        return (i == null ? void 0 : i()) ?? !1;\n      }\n    });\n  }\n  handleKeystroke(t, r) {\n    u(this, y).push(G(r));\n    const n = u(this, y).join(\",\");\n    let i = pt(\n      u(this, T).filter(\n        (o) => o.shortcut.startsWith(n) && o.disabled == !1 && o.target.contains(t)\n      )\n    );\n    if (clearTimeout(u(this, U)), i.length == 0) {\n      L(this, E, k).call(this);\n      return;\n    }\n    i.length == 1 ? (L(this, E, k).call(this), i[0].action()) : h(this, U, setTimeout(() => {\n      i = i.filter((o) => o.shortcut == n), L(this, E, k).call(this), i.length == 1 && i[0].action();\n    }, u(this, M)));\n  }\n}\nT = new WeakMap(), M = new WeakMap(), E = new WeakSet(), k = function() {\n  clearTimeout(u(this, U)), h(this, y, []);\n}, y = new WeakMap(), U = new WeakMap();\nfunction gt() {\n  const e = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  e.setAttribute(\"width\", \"100%\"), e.setAttribute(\"height\", \"100%\"), e.setAttribute(\"viewBox\", \"0 0 24 24\"), e.setAttribute(\"fill\", \"none\");\n  const t = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  return t.setAttribute(\"d\", \"M9 18L15 12L9 6\"), t.setAttribute(\"stroke\", \"currentColor\"), t.setAttribute(\"stroke-width\", \"2\"), t.setAttribute(\"stroke-linecap\", \"round\"), t.setAttribute(\"stroke-linejoin\", \"round\"), e.appendChild(t), e;\n}\nfunction It() {\n  const e = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  e.setAttribute(\"width\", \"100%\"), e.setAttribute(\"height\", \"100%\"), e.setAttribute(\"viewBox\", \"0 0 24 24\"), e.setAttribute(\"fill\", \"none\");\n  const t = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  return t.setAttribute(\"d\", \"M6 9L12 15L18 9\"), t.setAttribute(\"stroke\", \"currentColor\"), t.setAttribute(\"stroke-width\", \"2\"), t.setAttribute(\"stroke-linecap\", \"round\"), t.setAttribute(\"stroke-linejoin\", \"round\"), e.appendChild(t), e;\n}\nconst wt = {\n  \"arrow-chevron-right\": gt,\n  \"arrow-chevron-down\": It\n};\nfunction vt() {\n  const e = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  e.setAttribute(\"width\", \"100%\"), e.setAttribute(\"height\", \"100%\"), e.setAttribute(\"viewBox\", \"0 0 24 24\"), e.setAttribute(\"fill\", \"none\");\n  const t = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  return t.setAttribute(\"d\", \"M14 2.26953V6.40007C14 6.96012 14 7.24015 14.109 7.45406C14.2049 7.64222 14.3578 7.7952 14.546 7.89108C14.7599 8.00007 15.0399 8.00007 15.6 8.00007H19.7305M16 13H8M16 17H8M10 9H8M14 2H8.8C7.11984 2 6.27976 2 5.63803 2.32698C5.07354 2.6146 4.6146 3.07354 4.32698 3.63803C4 4.27976 4 5.11984 4 6.8V17.2C4 18.8802 4 19.7202 4.32698 20.362C4.6146 20.9265 5.07354 21.3854 5.63803 21.673C6.27976 22 7.11984 22 8.8 22H15.2C16.8802 22 17.7202 22 18.362 21.673C18.9265 21.3854 19.3854 20.9265 19.673 20.362C20 19.7202 20 18.8802 20 17.2V8L14 2Z\"), t.setAttribute(\"stroke\", \"currentColor\"), t.setAttribute(\"stroke-width\", \"2\"), t.setAttribute(\"stroke-linecap\", \"round\"), t.setAttribute(\"stroke-linejoin\", \"round\"), e.appendChild(t), e;\n}\nconst mt = {\n  \"file-document\": vt\n};\nfunction Ct() {\n  const e = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  e.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\"), e.setAttribute(\"width\", \"16\"), e.setAttribute(\"height\", \"16\"), e.setAttribute(\"fill\", \"currentColor\"), e.setAttribute(\"class\", \"bi bi-type-bold\"), e.setAttribute(\"viewBox\", \"0 0 16 16\");\n  const t = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  return t.setAttribute(\"d\", \"M8.21 13c2.106 0 3.412-1.087 3.412-2.823 0-1.306-.984-2.283-2.324-2.386v-.055a2.176 2.176 0 0 0 1.852-2.14c0-1.51-1.162-2.46-3.014-2.46H3.843V13zM5.908 4.674h1.696c.963 0 1.517.451 1.517 1.244 0 .834-.629 1.32-1.73 1.32H5.908V4.673zm0 6.788V8.598h1.73c1.217 0 1.88.492 1.88 1.415 0 .943-.643 1.449-1.832 1.449H5.907z\"), e.appendChild(t), e;\n}\nfunction bt() {\n  const e = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  e.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\"), e.setAttribute(\"width\", \"16\"), e.setAttribute(\"height\", \"16\"), e.setAttribute(\"fill\", \"currentColor\"), e.setAttribute(\"class\", \"bi bi-type-italic\"), e.setAttribute(\"viewBox\", \"0 0 16 16\");\n  const t = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  return t.setAttribute(\"d\", \"M7.991 11.674 9.53 4.455c.123-.595.246-.71 1.347-.807l.11-.52H7.211l-.11.52c1.06.096 1.128.212 1.005.807L6.57 11.674c-.123.595-.246.71-1.346.806l-.11.52h3.774l.11-.52c-1.06-.095-1.129-.211-1.006-.806z\"), e.appendChild(t), e;\n}\nfunction xt() {\n  const e = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  e.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\"), e.setAttribute(\"width\", \"16\"), e.setAttribute(\"height\", \"16\"), e.setAttribute(\"fill\", \"currentColor\"), e.setAttribute(\"class\", \"bi bi-type-underline\"), e.setAttribute(\"viewBox\", \"0 0 16 16\");\n  const t = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  return t.setAttribute(\"d\", \"M5.313 3.136h-1.23V9.54c0 2.105 1.47 3.623 3.917 3.623s3.917-1.518 3.917-3.623V3.136h-1.23v6.323c0 1.49-.978 2.57-2.687 2.57s-2.687-1.08-2.687-2.57zM12.5 15h-9v-1h9z\"), e.appendChild(t), e;\n}\nconst At = {\n  \"text-bold\": Ct,\n  \"text-italic\": bt,\n  \"text-underline\": xt\n}, Et = {\n  ...At,\n  ...wt,\n  ...mt\n};\nfunction Ht(e) {\n  return Et[e]();\n}\nfunction kt(e, t) {\n  function r(n) {\n    e.contains(n.target) || (document.removeEventListener(\"click\", r), t(n));\n  }\n  document.addEventListener(\"click\", r);\n}\nvar yt = /* @__PURE__ */ ((e) => (e.TOP = \"top\", e.BOTTOM = \"bottom\", e))(yt || {}), Ut = /* @__PURE__ */ ((e) => (e.START = \"start\", e.CENTER = \"center\", e.END = \"end\", e))(Ut || {});\nfunction $(e) {\n  return {\n    direction: \"bottom\",\n    align: \"start\",\n    useMinWidth: !1,\n    autoReposition: !0,\n    popOver: !1,\n    useBacksplash: !0,\n    ...e\n  };\n}\nfunction Bt(e, t, r) {\n  r = $(r);\n  const n = t.getBoundingClientRect();\n  tt(e, r, n), r.useMinWidth && e.style.setProperty(\"min-width\", n.width + \"px\");\n  let i;\n  if (r.useBacksplash && (i = _(i, e, r)), r != null && r.autoReposition) {\n    const o = setInterval(() => {\n      if (!document.body.contains(e)) {\n        clearInterval(o);\n        return;\n      }\n      const s = t.getBoundingClientRect();\n      s.top == n.top && s.left == n.left || (clearInterval(o), i == null || i.remove(), Bt(e, t, r));\n    }, 100);\n  }\n}\nfunction Dt(e, t, r, n) {\n  n = $(n), tt(e, n, { top: r, left: t, height: 0, width: 0 });\n  let o;\n  if (n.useBacksplash && (o = _(o, e, n)), n != null && n.autoReposition) {\n    const s = document.body.getBoundingClientRect(), c = setInterval(() => {\n      if (!document.body.contains(e)) {\n        clearInterval(c);\n        return;\n      }\n      const d = document.body.getBoundingClientRect();\n      d.top == s.top && d.left == s.left || (clearInterval(c), o == null || o.remove(), Dt(e, t, r, n));\n    }, 100);\n  }\n}\nfunction _(e, t, r) {\n  return e = document.createElement(\"div\"), e.style.setProperty(\"position\", \"absolute\"), e.style.setProperty(\"top\", \"0\"), e.style.setProperty(\"right\", \"0\"), e.style.setProperty(\"bottom\", \"0\"), e.style.setProperty(\"left\", \"0\"), e.style.setProperty(\"z-index\", \"10\"), e.tabIndex = -1, e.addEventListener(\"click\", (n) => {\n    var i;\n    t.contains(n.target) || (t.remove(), (i = r.onBacksplashClick) == null || i.call(r));\n  }), document.body.append(e), e.append(t), t.remove = /* @__PURE__ */ ((n) => function() {\n    n.call(this), e == null || e.remove();\n  })(t.remove), e;\n}\nfunction tt(e, t, r) {\n  document.contains(e) || document.body.append(e), e.style.setProperty(\"position\", \"absolute\");\n  const n = e.getBoundingClientRect(), { bottom: i, top: o } = Ot(t, r, n), { left: s, right: c } = St(t, r, n);\n  o > 0 ? e.style.setProperty(\"top\", o + \"px\") : i > 0 && e.style.setProperty(\"bottom\", i + \"px\"), s > 0 ? e.style.setProperty(\"left\", s + \"px\") : c > 0 && e.style.setProperty(\"right\", c + \"px\");\n}\nfunction St(e, t, r) {\n  let n = 0, i = 0;\n  if ([\n    \"start\",\n    \"end\",\n    \"center\"\n    /* CENTER */\n  ].includes(e.align)) {\n    const s = t.left, c = window.innerWidth - (t.left + t.width);\n    var o = e.align;\n    o == \"center\" && s >= r.width / 2 && c >= r.width / 2 ? o = \"center\" : o == \"end\" && s >= r.width ? o = \"end\" : o == \"start\" && c >= r.width || s < c ? o = \"start\" : s > c && (o = \"end\"), o == \"center\" ? n = t.left + t.width / 2 - r.width / 2 : o == \"start\" ? n = t.left : i = window.innerWidth - (t.left + t.width);\n  } else\n    throw \"Invalid PopupAlign: \" + e.align;\n  return { left: n, right: i };\n}\nfunction Ot(e, t, r) {\n  let n = 0, i = 0;\n  if ([\n    \"top\",\n    \"bottom\"\n    /* BOTTOM */\n  ].includes(e.direction)) {\n    const s = t.top - r.height, c = window.innerHeight - (t.top + t.height + r.height);\n    var o = e.direction;\n    o == \"bottom\" && c < r.height && s > c ? o = \"top\" : o == \"top\" && s < r.height && s < c ? o = \"bottom\" : s <= 0 && c <= 0 && s > c ? o = \"top\" : s <= 0 && c <= 0 && s < c && (o = \"bottom\"), o == \"top\" ? i = window.innerHeight - t.top : n = t.top + t.height, e.popOver && o == \"top\" ? i -= t.height : e.popOver && (n -= t.height);\n  } else\n    throw \"Invalid PopupDirection: \" + e.direction;\n  return { bottom: i, top: n };\n}\nfunction Rt(e, t = \"bg-zinc-700 rounded p-1 z-10\") {\n  const r = document.createElement(\"div\");\n  return t && (r.className += \" \" + t), r.append(...[e ?? []].flat().filter((n) => n)), r;\n}\nfunction zt(e, t, r, n = 200, i = 300) {\n  var o, s;\n  [e].flat().forEach((c) => c.addEventListener(\"mouseenter\", () => {\n    clearTimeout(o), s = setTimeout(() => t(), n);\n  })), [e].flat().forEach((c) => c.addEventListener(\"mouseleave\", () => {\n    clearTimeout(s), o = setTimeout(() => r(), i);\n  }));\n}\nexport {\n  Mt as EventManager,\n  Nt as KeyboardShortcut,\n  Ut as PopupAlign,\n  yt as PopupDirection,\n  Lt as SaveManager,\n  Z as generateUId,\n  Ht as getIcon,\n  G as getShortcutString,\n  Tt as linkedList,\n  zt as onHover,\n  kt as onceClickOutside,\n  Rt as popupContainer,\n  Dt as popupPosition,\n  Bt as popupRelative\n};\n//# sourceMappingURL=index.es.js.map\n","import { ContextMenu } from \"./contextMenu\";\n\nexport interface ContextMenuItemProps<TConfig> {\n    context: ContextMenu\n    get config(): TConfig;\n}\n\nexport abstract class ContextMenuItem<TConfig> {\n    #context: ContextMenu;\n    get context(): ContextMenu { return this.#context; }\n\n    constructor(props: ContextMenuItemProps<TConfig>) {\n        this.#context = props.context;\n    }\n\n    abstract render(): HTMLElement;\n}\n\n\nexport type CustomContextMenuItem<TConfig> = (\n    typeof ContextMenuItem<TConfig> & (new (props: ContextMenuItemProps<TConfig>) => ContextMenuItem<TConfig>)\n);\n\n\nfunction createContextMenuItemInstance<\n    T extends ContextMenuItem<TConfig>,\n    TConfig\n>(\n    constructor: new (props: ContextMenuItemProps<TConfig>) => T,\n    props: ContextMenuItemProps<TConfig>\n): T {\n    return new constructor(props);\n}\n\nexport function initContextMenuItem<TConfig>(\n    constructor: new (props: ContextMenuItemProps<TConfig>) => ContextMenuItem<TConfig>,\n    props: ContextMenuItemProps<TConfig>\n): ContextMenuItem<TConfig> {\n    return createContextMenuItemInstance(constructor, props);\n}","import { IconTypes, getIcon } from \"@eythorsson-dev/common-utils\";\nimport { ContextMenuItem, ContextMenuItemProps } from \"./contextMenuItem\";\n\n\nexport interface ContextMenuOptionConfig {\n    get icon(): IconTypes;\n    get type(): \"Option\";\n    get name(): string;\n\n    isDisabled?: boolean | (() => boolean);\n\n    execute(): void;\n}\nexport class ContextMenuOption extends ContextMenuItem<ContextMenuOptionConfig> {\n    #config: ContextMenuOptionConfig;\n\n    constructor(props: ContextMenuItemProps<ContextMenuOptionConfig>) {\n        super(props);\n\n        this.#config = props.config;\n    }\n\n    render(): HTMLElement {\n        const wrapper = document.createElement(\"div\");\n        wrapper.className = \"context-menu-group\";\n        wrapper.tabIndex = 0;\n        \n        const icon = document.createElement(\"div\");\n        icon.className = \"icon\";\n        icon.append(getIcon(this.#config.icon));\n\n        const name = document.createElement(\"div\");\n        name.className = \"title\";\n        name.innerText = this.#config.name;\n\n        wrapper.append(\n            icon,\n            name\n        );\n\n        wrapper.addEventListener(\"click\", () => this.execute());\n        wrapper.addEventListener(\"keydown\", event => event.key == \"Enter\" && this.execute());\n\n        return wrapper;\n    }\n\n    execute(){\n        this.context.hide(); \n        this.#config.execute();\n    }\n}\n","import { ContextMenuItem, ContextMenuItemProps } from \"./contextMenuItem\";\n\nexport interface ContextMenuDividerConfig {\n    name?: string;\n    get type(): \"Divider\";\n}\nexport class ContextMenuDivider extends ContextMenuItem<ContextMenuDividerConfig> {\n\n    constructor(config: ContextMenuItemProps<ContextMenuDividerConfig>) {\n        super(config);\n    }\n\n    render(): HTMLElement {\n        const divider = document.createElement(\"hr\");\n        divider.className = \"context-menu-divider\";\n\n        return divider;\n    }\n}","\nexport function selectNextFocusItem(container: HTMLElement, activeElement: HTMLElement, selectNext: boolean) {\n    const focusableElements = [\n        ...container.querySelectorAll('a, button, input, select, textarea, [tabindex]:not([tabindex=\"-1\"])')\n    ].reduce((arr, curr) => (arr.some(x => x.contains(curr)) || arr.push(curr as HTMLElement), arr), [] as HTMLElement[]);\n\n    const currentIndex = focusableElements.indexOf(activeElement);\n\n    const nextIndex = selectNext\n        ? (currentIndex + 1) % focusableElements.length\n        : (currentIndex - 1 + focusableElements.length) % focusableElements.length;\n\n    focusableElements[nextIndex].focus();\n}\n","import { IconTypes, getIcon } from \"@eythorsson-dev/common-utils\";\nimport { ContextMenuItem, ContextMenuItemProps } from \"./contextMenuItem\";\nimport { ContextMenuDividerConfig } from \"./contextMenuDivider\";\nimport { ContextMenuOptionConfig } from \"./contextMenuOption\";\nimport { selectNextFocusItem } from \"./helpers/selectNextFocusItem\";\n\nexport type ContextMenuConfigs = ContextMenuOptionConfig | ContextMenuDividerConfig | ContextMenuOptionGroupConfig\n\nexport interface ContextMenuOptionGroupConfig {\n    get icon(): IconTypes;\n    get type(): \"Group\";\n    get name(): string;\n\n    get items(): ContextMenuConfigs[]\n}\n\nexport class ContextMenuOptionGroup extends ContextMenuItem<ContextMenuOptionGroupConfig> {\n    #config: ContextMenuOptionGroupConfig;\n\n\n    constructor(props: ContextMenuItemProps<ContextMenuOptionGroupConfig>) {\n        super(props);\n\n        this.#config = props.config;\n    }\n\n    render(): HTMLElement {\n        const wrapper = document.createElement(\"div\");\n        wrapper.className = \"context-menu-item\";\n        wrapper.tabIndex = 0;\n\n        const icon = document.createElement(\"div\");\n        icon.className = \"icon\";\n        icon.append(getIcon(this.#config.icon));\n\n        const name = document.createElement(\"div\");\n        name.className = \"title\";\n        name.innerText = this.#config.name;\n\n        const arrow = document.createElement(\"div\");\n        arrow.className = \"icon caret\";\n        arrow.append(getIcon(\"arrow-chevron-right\"));\n\n        wrapper.append(\n            icon,\n            name,\n            arrow\n        );\n\n        const subMenu = this.context.createMenu(this.#config.items);\n        wrapper.append(subMenu);\n\n        wrapper\n            .addEventListener(\"focus\", () => {\n                let _alignBottom = alignBottom();\n                let _alignLeft = alignLeft();\n\n                subMenu.style.setProperty(_alignBottom ? \"bottom\" : \"top\", \"0\");\n                subMenu.style.removeProperty(_alignBottom ? \"top\" : \"bottom\");\n                subMenu.style.setProperty(_alignLeft ? \"right\" : \"left\", \"100%\");\n                subMenu.style.removeProperty(_alignLeft ? \"left\" : \"right\");\n            })\n\n        wrapper\n            .addEventListener(\"keydown\", event => {\n                const _alignLeft = alignLeft();\n\n                // focus on first child\n                if (event.key == \"ArrowLeft\" && _alignLeft\n                    || event.key == \"ArrowRight\" && _alignLeft == false) {\n\n                    selectNextFocusItem(subMenu, subMenu, true);\n                }\n                // focus on parent\n                else if (event.key == \"ArrowLeft\" && _alignLeft == false\n                || event.key == \"ArrowRight\" && _alignLeft) {\n                    \n                    wrapper.focus();\n                }\n                \n            })\n        return wrapper;\n\n        function alignBottom() {\n            const subMenuRect = subMenu.getBoundingClientRect();\n            const parentRect = wrapper.getBoundingClientRect();\n\n            const mTop = parentRect.bottom - subMenuRect.height;\n            const mBottom = window.innerHeight - parentRect.top - subMenuRect.height;\n\n            let alignBottom = mTop >= 0 && mBottom < 0;\n            return alignBottom;\n        }\n\n        function alignLeft() {\n            const subMenuRect = subMenu.getBoundingClientRect();\n            const parentRect = wrapper.getBoundingClientRect();\n\n            const mLeft = parentRect.left - subMenuRect.width;\n            const mRight = window.innerWidth - parentRect.right - subMenuRect.width;\n\n            let alignLeft = mLeft >= 0 && mRight < 0;\n            return alignLeft;\n        }\n    }\n}\n","import { popupPosition, popupContainer } from \"@eythorsson-dev/common-utils\"\nimport { CustomContextMenuItem, initContextMenuItem } from \"./contextMenuItem\";\nimport { ContextMenuOption } from \"./contextMenuOption\";\nimport { ContextMenuDivider } from \"./contextMenuDivider\";\nimport { ContextMenuConfigs, ContextMenuOptionGroup } from \"./contextMenuOptionGroup\";\nimport { selectNextFocusItem } from \"./helpers/selectNextFocusItem\";\n\nexport interface ContextMenuConfig {\n    target: HTMLElement,\n    get options(): ContextMenuConfigs[],\n\n    itemByType?: { [key: string]: CustomContextMenuItem<any> }\n}\n\nexport class ContextMenu {\n    #config: ContextMenuConfig;\n\n    constructor(config: ContextMenuConfig) {\n        this.#config = {\n            ...config,\n            itemByType: {\n                \"Option\": ContextMenuOption,\n                \"Divider\": ContextMenuDivider,\n                \"Group\": ContextMenuOptionGroup,\n                ...config.itemByType\n            }\n        };\n\n        config.target\n            .addEventListener(\"contextmenu\", event => {\n                event.preventDefault();\n\n                this.show(event.pageX, event.pageY)\n            });\n    }\n\n    #container: HTMLElement | undefined\n    show(x: number, y: number): void {\n        this.#container = this.createMenu(this.#config.options);\n        popupPosition(this.#container, x, y);\n    }\n\n    hide(): void {\n        this.#container?.remove();\n    }\n\n    createMenu(config: ContextMenuConfigs[]): HTMLElement {\n        const items = config.map(x => initContextMenuItem(\n            this.#config.itemByType![x.type],\n            {\n                context: this,\n                config: x\n            }\n        ));\n\n        const container = popupContainer(items.map(x => x.render()), \"context-menu\");\n\n        document.addEventListener(\"keydown\", event => onKeydown(event))\n        container.addEventListener(\"keydown\", event => onKeydown(event))\n\n        return container;\n\n        function onKeydown(event: KeyboardEvent) {\n            if (event.key == \"ArrowDown\" || event.key == \"ArrowUp\") {\n                const selectNext = event.key == \"ArrowDown\";\n\n                const activeElement = document.activeElement as HTMLElement;\n                selectNextFocusItem(container, activeElement, selectNext);\n                event.stopPropagation();\n            }\n        }\n    }\n}\n\n\n"],"names":["f","e","gt","t","It","wt","vt","mt","Ct","bt","xt","At","Et","Ht","$","Dt","r","n","tt","o","_","s","c","d","i","Ot","St","Rt","_context","ContextMenuItem","props","__privateAdd","__privateSet","__privateGet","createContextMenuItemInstance","constructor","initContextMenuItem","_config","ContextMenuOption","wrapper","icon","getIcon","name","event","ContextMenuDivider","config","divider","selectNextFocusItem","container","activeElement","selectNext","focusableElements","arr","curr","x","currentIndex","nextIndex","ContextMenuOptionGroup","arrow","subMenu","_alignBottom","alignBottom","_alignLeft","alignLeft","subMenuRect","parentRect","mTop","mBottom","mLeft","mRight","_container","ContextMenu","y","popupPosition","_a","items","popupContainer","onKeydown"],"mappings":";;;;;AAiTA,MAAMA,IAAI,CAAA;AACV,SAASC,IAAI,GAAGA,IAAI,KAAK,EAAEA;AACzB,EAAAD,EAAE,MAAMC,IAAI,KAAK,SAAS,EAAE,EAAE,MAAM,CAAC,CAAC;AAI7B,OAAO,SAAS,OAAO,OAAO,cAAc,OAAO,WAAW,KAAK,MAAM;AA8NpF,SAASC,IAAK;AACZ,QAAMD,IAAI,SAAS,gBAAgB,8BAA8B,KAAK;AACtE,EAAAA,EAAE,aAAa,SAAS,MAAM,GAAGA,EAAE,aAAa,UAAU,MAAM,GAAGA,EAAE,aAAa,WAAW,WAAW,GAAGA,EAAE,aAAa,QAAQ,MAAM;AACxI,QAAME,IAAI,SAAS,gBAAgB,8BAA8B,MAAM;AACvE,SAAOA,EAAE,aAAa,KAAK,iBAAiB,GAAGA,EAAE,aAAa,UAAU,cAAc,GAAGA,EAAE,aAAa,gBAAgB,GAAG,GAAGA,EAAE,aAAa,kBAAkB,OAAO,GAAGA,EAAE,aAAa,mBAAmB,OAAO,GAAGF,EAAE,YAAYE,CAAC,GAAGF;AACzO;AACA,SAASG,IAAK;AACZ,QAAMH,IAAI,SAAS,gBAAgB,8BAA8B,KAAK;AACtE,EAAAA,EAAE,aAAa,SAAS,MAAM,GAAGA,EAAE,aAAa,UAAU,MAAM,GAAGA,EAAE,aAAa,WAAW,WAAW,GAAGA,EAAE,aAAa,QAAQ,MAAM;AACxI,QAAME,IAAI,SAAS,gBAAgB,8BAA8B,MAAM;AACvE,SAAOA,EAAE,aAAa,KAAK,iBAAiB,GAAGA,EAAE,aAAa,UAAU,cAAc,GAAGA,EAAE,aAAa,gBAAgB,GAAG,GAAGA,EAAE,aAAa,kBAAkB,OAAO,GAAGA,EAAE,aAAa,mBAAmB,OAAO,GAAGF,EAAE,YAAYE,CAAC,GAAGF;AACzO;AACA,MAAMI,IAAK;AAAA,EACT,uBAAuBH;AAAA,EACvB,sBAAsBE;AACxB;AACA,SAASE,IAAK;AACZ,QAAML,IAAI,SAAS,gBAAgB,8BAA8B,KAAK;AACtE,EAAAA,EAAE,aAAa,SAAS,MAAM,GAAGA,EAAE,aAAa,UAAU,MAAM,GAAGA,EAAE,aAAa,WAAW,WAAW,GAAGA,EAAE,aAAa,QAAQ,MAAM;AACxI,QAAME,IAAI,SAAS,gBAAgB,8BAA8B,MAAM;AACvE,SAAOA,EAAE,aAAa,KAAK,yhBAAyhB,GAAGA,EAAE,aAAa,UAAU,cAAc,GAAGA,EAAE,aAAa,gBAAgB,GAAG,GAAGA,EAAE,aAAa,kBAAkB,OAAO,GAAGA,EAAE,aAAa,mBAAmB,OAAO,GAAGF,EAAE,YAAYE,CAAC,GAAGF;AACjvB;AACA,MAAMM,IAAK;AAAA,EACT,iBAAiBD;AACnB;AACA,SAASE,IAAK;AACZ,QAAMP,IAAI,SAAS,gBAAgB,8BAA8B,KAAK;AACtE,EAAAA,EAAE,aAAa,SAAS,4BAA4B,GAAGA,EAAE,aAAa,SAAS,IAAI,GAAGA,EAAE,aAAa,UAAU,IAAI,GAAGA,EAAE,aAAa,QAAQ,cAAc,GAAGA,EAAE,aAAa,SAAS,iBAAiB,GAAGA,EAAE,aAAa,WAAW,WAAW;AAC/O,QAAME,IAAI,SAAS,gBAAgB,8BAA8B,MAAM;AACvE,SAAOA,EAAE,aAAa,KAAK,8TAA8T,GAAGF,EAAE,YAAYE,CAAC,GAAGF;AAChX;AACA,SAASQ,IAAK;AACZ,QAAMR,IAAI,SAAS,gBAAgB,8BAA8B,KAAK;AACtE,EAAAA,EAAE,aAAa,SAAS,4BAA4B,GAAGA,EAAE,aAAa,SAAS,IAAI,GAAGA,EAAE,aAAa,UAAU,IAAI,GAAGA,EAAE,aAAa,QAAQ,cAAc,GAAGA,EAAE,aAAa,SAAS,mBAAmB,GAAGA,EAAE,aAAa,WAAW,WAAW;AACjP,QAAME,IAAI,SAAS,gBAAgB,8BAA8B,MAAM;AACvE,SAAOA,EAAE,aAAa,KAAK,0MAA0M,GAAGF,EAAE,YAAYE,CAAC,GAAGF;AAC5P;AACA,SAASS,IAAK;AACZ,QAAMT,IAAI,SAAS,gBAAgB,8BAA8B,KAAK;AACtE,EAAAA,EAAE,aAAa,SAAS,4BAA4B,GAAGA,EAAE,aAAa,SAAS,IAAI,GAAGA,EAAE,aAAa,UAAU,IAAI,GAAGA,EAAE,aAAa,QAAQ,cAAc,GAAGA,EAAE,aAAa,SAAS,sBAAsB,GAAGA,EAAE,aAAa,WAAW,WAAW;AACpP,QAAME,IAAI,SAAS,gBAAgB,8BAA8B,MAAM;AACvE,SAAOA,EAAE,aAAa,KAAK,uKAAuK,GAAGF,EAAE,YAAYE,CAAC,GAAGF;AACzN;AACA,MAAMU,IAAK;AAAA,EACT,aAAaH;AAAA,EACb,eAAeC;AAAA,EACf,kBAAkBC;AACpB,GAAGE,IAAK;AAAA,EACN,GAAGD;AAAA,EACH,GAAGN;AAAA,EACH,GAAGE;AACL;AACA,SAASM,EAAGZ,GAAG;AACb,SAAOW,EAAGX,CAAC;AACb;AAQA,SAASa,EAAEb,GAAG;AACZ,SAAO;AAAA,IACL,WAAW;AAAA,IACX,OAAO;AAAA,IACP,aAAa;AAAA,IACb,gBAAgB;AAAA,IAChB,SAAS;AAAA,IACT,eAAe;AAAA,IACf,GAAGA;AAAA,EACP;AACA;AAiBA,SAASc,EAAGd,GAAGE,GAAGa,GAAGC,GAAG;AACtB,EAAAA,IAAIH,EAAEG,CAAC,GAAGC,EAAGjB,GAAGgB,GAAG,EAAE,KAAKD,GAAG,MAAMb,GAAG,QAAQ,GAAG,OAAO,EAAC,CAAE;AAC3D,MAAIgB;AACJ,MAAIF,EAAE,kBAAkBE,IAAIC,EAAED,GAAGlB,GAAGgB,CAAC,IAAIA,KAAK,QAAQA,EAAE,gBAAgB;AACtE,UAAMI,IAAI,SAAS,KAAK,sBAAqB,GAAIC,IAAI,YAAY,MAAM;AACrE,UAAI,CAAC,SAAS,KAAK,SAASrB,CAAC,GAAG;AAC9B,sBAAcqB,CAAC;AACf;AAAA,MACD;AACD,YAAMC,IAAI,SAAS,KAAK,sBAAqB;AAC7C,MAAAA,EAAE,OAAOF,EAAE,OAAOE,EAAE,QAAQF,EAAE,SAAS,cAAcC,CAAC,GAAGH,KAAK,QAAQA,EAAE,UAAUJ,EAAGd,GAAGE,GAAGa,GAAGC,CAAC;AAAA,IAChG,GAAE,GAAG;AAAA,EACP;AACH;AACA,SAASG,EAAEnB,GAAGE,GAAGa,GAAG;AAClB,SAAOf,IAAI,SAAS,cAAc,KAAK,GAAGA,EAAE,MAAM,YAAY,YAAY,UAAU,GAAGA,EAAE,MAAM,YAAY,OAAO,GAAG,GAAGA,EAAE,MAAM,YAAY,SAAS,GAAG,GAAGA,EAAE,MAAM,YAAY,UAAU,GAAG,GAAGA,EAAE,MAAM,YAAY,QAAQ,GAAG,GAAGA,EAAE,MAAM,YAAY,WAAW,IAAI,GAAGA,EAAE,WAAW,IAAIA,EAAE,iBAAiB,SAAS,CAACgB,MAAM;AACzT,QAAIO;AACJ,IAAArB,EAAE,SAASc,EAAE,MAAM,MAAMd,EAAE,WAAWqB,IAAIR,EAAE,sBAAsB,QAAQQ,EAAE,KAAKR,CAAC;AAAA,EACnF,CAAA,GAAG,SAAS,KAAK,OAAOf,CAAC,GAAGA,EAAE,OAAOE,CAAC,GAAGA,EAAE,SAA0B,kBAACc,MAAM,WAAW;AACtF,IAAAA,EAAE,KAAK,IAAI,GAAGhB,KAAK,QAAQA,EAAE;EACjC,GAAKE,EAAE,MAAM,GAAGF;AAChB;AACA,SAASiB,EAAGjB,GAAGE,GAAGa,GAAG;AACnB,WAAS,SAASf,CAAC,KAAK,SAAS,KAAK,OAAOA,CAAC,GAAGA,EAAE,MAAM,YAAY,YAAY,UAAU;AAC3F,QAAMgB,IAAIhB,EAAE,sBAAqB,GAAI,EAAE,QAAQuB,GAAG,KAAKL,MAAMM,EAAGtB,GAAGa,GAAGC,CAAC,GAAG,EAAE,MAAMI,GAAG,OAAO,EAAG,IAAGK,EAAGvB,GAAGa,GAAGC,CAAC;AAC5G,EAAAE,IAAI,IAAIlB,EAAE,MAAM,YAAY,OAAOkB,IAAI,IAAI,IAAIK,IAAI,KAAKvB,EAAE,MAAM,YAAY,UAAUuB,IAAI,IAAI,GAAGH,IAAI,IAAIpB,EAAE,MAAM,YAAY,QAAQoB,IAAI,IAAI,IAAI,IAAI,KAAKpB,EAAE,MAAM,YAAY,SAAS,IAAI,IAAI;AACjM;AACA,SAASyB,EAAGzB,GAAGE,GAAGa,GAAG;AACnB,MAAIC,IAAI,GAAGO,IAAI;AACf,MAAI;AAAA,IACF;AAAA,IACA;AAAA,IACA;AAAA;AAAA,EAEJ,EAAI,SAASvB,EAAE,KAAK,GAAG;AACnB,UAAMoB,IAAIlB,EAAE,MAAM,IAAI,OAAO,cAAcA,EAAE,OAAOA,EAAE;AACtD,QAAIgB,IAAIlB,EAAE;AACV,IAAAkB,KAAK,YAAYE,KAAKL,EAAE,QAAQ,KAAK,KAAKA,EAAE,QAAQ,IAAIG,IAAI,WAAWA,KAAK,SAASE,KAAKL,EAAE,QAAQG,IAAI,QAAQA,KAAK,WAAW,KAAKH,EAAE,SAASK,IAAI,IAAIF,IAAI,UAAUE,IAAI,MAAMF,IAAI,QAAQA,KAAK,WAAWF,IAAId,EAAE,OAAOA,EAAE,QAAQ,IAAIa,EAAE,QAAQ,IAAIG,KAAK,UAAUF,IAAId,EAAE,OAAOqB,IAAI,OAAO,cAAcrB,EAAE,OAAOA,EAAE;AAAA,EACtT;AACC,UAAM,yBAAyBF,EAAE;AACnC,SAAO,EAAE,MAAMgB,GAAG,OAAOO,EAAC;AAC5B;AACA,SAASC,EAAGxB,GAAGE,GAAGa,GAAG;AACnB,MAAIC,IAAI,GAAGO,IAAI;AACf,MAAI;AAAA,IACF;AAAA,IACA;AAAA;AAAA,EAEJ,EAAI,SAASvB,EAAE,SAAS,GAAG;AACvB,UAAMoB,IAAIlB,EAAE,MAAMa,EAAE,QAAQ,IAAI,OAAO,eAAeb,EAAE,MAAMA,EAAE,SAASa,EAAE;AAC3E,QAAIG,IAAIlB,EAAE;AACV,IAAAkB,KAAK,YAAY,IAAIH,EAAE,UAAUK,IAAI,IAAIF,IAAI,QAAQA,KAAK,SAASE,IAAIL,EAAE,UAAUK,IAAI,IAAIF,IAAI,WAAWE,KAAK,KAAK,KAAK,KAAKA,IAAI,IAAIF,IAAI,QAAQE,KAAK,KAAK,KAAK,KAAKA,IAAI,MAAMF,IAAI,WAAWA,KAAK,QAAQK,IAAI,OAAO,cAAcrB,EAAE,MAAMc,IAAId,EAAE,MAAMA,EAAE,QAAQF,EAAE,WAAWkB,KAAK,QAAQK,KAAKrB,EAAE,SAASF,EAAE,YAAYgB,KAAKd,EAAE;AAAA,EACnU;AACC,UAAM,6BAA6BF,EAAE;AACvC,SAAO,EAAE,QAAQuB,GAAG,KAAKP,EAAC;AAC5B;AACA,SAASU,EAAG1B,GAAGE,IAAI,gCAAgC;AACjD,QAAMa,IAAI,SAAS,cAAc,KAAK;AACtC,SAAOb,MAAMa,EAAE,aAAa,MAAMb,IAAIa,EAAE,OAAO,GAAG,CAACf,KAAK,EAAE,EAAE,KAAI,EAAG,OAAO,CAACgB,MAAMA,CAAC,CAAC,GAAGD;AACxF;AAxXA,IAAAY;AC1SO,MAAeC,EAAyB;AAAA,EAI3C,YAAYC,GAAsC;AAHlD,IAAAC,EAAA,MAAAH;AAII,IAAAI,EAAA,MAAKJ,GAAWE,EAAM;AAAA,EAC1B;AAAA,EAJA,IAAI,UAAuB;AAAE,WAAOG,EAAA,MAAKL;AAAA,EAAU;AAOvD;AARIA,IAAA;AAgBJ,SAASM,EAILC,GACAL,GACC;AACM,SAAA,IAAIK,EAAYL,CAAK;AAChC;AAEgB,SAAAM,EACZD,GACAL,GACwB;AACjB,SAAAI,EAA8BC,GAAaL,CAAK;AAC3D;AD0QA,IAAAO;AEpSO,MAAMC,UAA0BT,EAAyC;AAAA,EAG5E,YAAYC,GAAsD;AAC9D,UAAMA,CAAK;AAHf,IAAAC,EAAA,MAAAM;AAKI,IAAAL,EAAA,MAAKK,GAAUP,EAAM;AAAA,EACzB;AAAA,EAEA,SAAsB;AACZ,UAAAS,IAAU,SAAS,cAAc,KAAK;AAC5C,IAAAA,EAAQ,YAAY,sBACpBA,EAAQ,WAAW;AAEb,UAAAC,IAAO,SAAS,cAAc,KAAK;AACzC,IAAAA,EAAK,YAAY,QACjBA,EAAK,OAAOC,EAAQR,EAAA,MAAKI,GAAQ,IAAI,CAAC;AAEhC,UAAAK,IAAO,SAAS,cAAc,KAAK;AACzC,WAAAA,EAAK,YAAY,SACZA,EAAA,YAAYT,EAAA,MAAKI,GAAQ,MAEtBE,EAAA;AAAA,MACJC;AAAA,MACAE;AAAA,IAAA,GAGJH,EAAQ,iBAAiB,SAAS,MAAM,KAAK,QAAS,CAAA,GAC9CA,EAAA,iBAAiB,WAAW,CAASI,MAAAA,EAAM,OAAO,WAAW,KAAK,SAAS,GAE5EJ;AAAA,EACX;AAAA,EAEA,UAAS;AACL,SAAK,QAAQ,QACbN,EAAA,MAAKI,GAAQ;EACjB;AACJ;AApCIA,IAAA;ACRG,MAAMO,UAA2Bf,EAA0C;AAAA,EAE9E,YAAYgB,GAAwD;AAChE,UAAMA,CAAM;AAAA,EAChB;AAAA,EAEA,SAAsB;AACZ,UAAAC,IAAU,SAAS,cAAc,IAAI;AAC3C,WAAAA,EAAQ,YAAY,wBAEbA;AAAA,EACX;AACJ;ACjBgB,SAAAC,EAAoBC,GAAwBC,GAA4BC,GAAqB;AACzG,QAAMC,IAAoB;AAAA,IACtB,GAAGH,EAAU,iBAAiB,qEAAqE;AAAA,EAAA,EACrG,OAAO,CAACI,GAAKC,OAAUD,EAAI,KAAK,CAAKE,MAAAA,EAAE,SAASD,CAAI,CAAC,KAAKD,EAAI,KAAKC,CAAmB,GAAGD,IAAM,CAAA,CAAmB,GAE9GG,IAAeJ,EAAkB,QAAQF,CAAa,GAEtDO,IAAYN,KACXK,IAAe,KAAKJ,EAAkB,UACtCI,IAAe,IAAIJ,EAAkB,UAAUA,EAAkB;AAEtD,EAAAA,EAAAK,CAAS,EAAE;AACjC;AJoSA,IAAAnB;AKjSO,MAAMoB,UAA+B5B,EAA8C;AAAA,EAItF,YAAYC,GAA2D;AACnE,UAAMA,CAAK;AAJf,IAAAC,EAAA,MAAAM;AAMI,IAAAL,EAAA,MAAKK,GAAUP,EAAM;AAAA,EACzB;AAAA,EAEA,SAAsB;AACZ,UAAAS,IAAU,SAAS,cAAc,KAAK;AAC5C,IAAAA,EAAQ,YAAY,qBACpBA,EAAQ,WAAW;AAEb,UAAAC,IAAO,SAAS,cAAc,KAAK;AACzC,IAAAA,EAAK,YAAY,QACjBA,EAAK,OAAOC,EAAQR,EAAA,MAAKI,GAAQ,IAAI,CAAC;AAEhC,UAAAK,IAAO,SAAS,cAAc,KAAK;AACzC,IAAAA,EAAK,YAAY,SACZA,EAAA,YAAYT,EAAA,MAAKI,GAAQ;AAExB,UAAAqB,IAAQ,SAAS,cAAc,KAAK;AAC1C,IAAAA,EAAM,YAAY,cACZA,EAAA,OAAOjB,EAAQ,qBAAqB,CAAC,GAEnCF,EAAA;AAAA,MACJC;AAAA,MACAE;AAAA,MACAgB;AAAA,IAAA;AAGJ,UAAMC,IAAU,KAAK,QAAQ,WAAW1B,EAAA,MAAKI,GAAQ,KAAK;AAC1D,WAAAE,EAAQ,OAAOoB,CAAO,GAGjBpB,EAAA,iBAAiB,SAAS,MAAM;AAC7B,UAAIqB,IAAeC,KACfC,IAAaC;AAEjB,MAAAJ,EAAQ,MAAM,YAAYC,IAAe,WAAW,OAAO,GAAG,GAC9DD,EAAQ,MAAM,eAAeC,IAAe,QAAQ,QAAQ,GAC5DD,EAAQ,MAAM,YAAYG,IAAa,UAAU,QAAQ,MAAM,GAC/DH,EAAQ,MAAM,eAAeG,IAAa,SAAS,OAAO;AAAA,IAAA,CAC7D,GAGAvB,EAAA,iBAAiB,WAAW,CAASI,MAAA;AAClC,YAAMmB,IAAaC;AAGf,MAAApB,EAAM,OAAO,eAAemB,KACzBnB,EAAM,OAAO,gBAAgBmB,KAAc,KAE1Bf,EAAAY,GAASA,GAAS,EAAI,KAGrChB,EAAM,OAAO,eAAemB,KAAc,MAChDnB,EAAM,OAAO,gBAAgBmB,MAE5BvB,EAAQ,MAAM;AAAA,IAClB,CAEH,GACEA;AAEP,aAASsB,IAAc;AACb,YAAAG,IAAcL,EAAQ,yBACtBM,IAAa1B,EAAQ,yBAErB2B,IAAOD,EAAW,SAASD,EAAY,QACvCG,IAAU,OAAO,cAAcF,EAAW,MAAMD,EAAY;AAG3DH,aADWK,KAAQ,KAAKC,IAAU;AAAA,IAE7C;AAEA,aAASJ,IAAY;AACX,YAAAC,IAAcL,EAAQ,yBACtBM,IAAa1B,EAAQ,yBAErB6B,IAAQH,EAAW,OAAOD,EAAY,OACtCK,IAAS,OAAO,aAAaJ,EAAW,QAAQD,EAAY;AAG3DD,aADSK,KAAS,KAAKC,IAAS;AAAA,IAE3C;AAAA,EACJ;AACJ;AAxFIhC,IAAA;ALgSJ,IAAAA,GAAAiC;AMnSO,MAAMC,EAAY;AAAA,EAGrB,YAAY1B,GAA2B;AAFvC,IAAAd,EAAA,MAAAM;AAqBA,IAAAN,EAAA,MAAAuC;AAlBI,IAAAtC,EAAA,MAAKK,GAAU;AAAA,MACX,GAAGQ;AAAA,MACH,YAAY;AAAA,QACR,QAAUP;AAAA,QACV,SAAWM;AAAA,QACX,OAASa;AAAA,QACT,GAAGZ,EAAO;AAAA,MACd;AAAA,IAAA,IAGGA,EAAA,OACF,iBAAiB,eAAe,CAASF,MAAA;AACtC,MAAAA,EAAM,eAAe,GAErB,KAAK,KAAKA,EAAM,OAAOA,EAAM,KAAK;AAAA,IAAA,CACrC;AAAA,EACT;AAAA,EAGA,KAAKW,GAAWkB,GAAiB;AAC7B,IAAAxC,EAAA,MAAKsC,GAAa,KAAK,WAAWrC,EAAA,MAAKI,GAAQ,OAAO,IACxCoC,EAAAxC,EAAA,MAAKqC,IAAYhB,GAAGkB,CAAC;AAAA,EACvC;AAAA,EAEA,OAAa;ANuQjB,QAAAE;AMtQQ,KAAAA,IAAAzC,EAAA,MAAKqC,OAAL,QAAAI,EAAiB;AAAA,EACrB;AAAA,EAEA,WAAW7B,GAA2C;AAC5C,UAAA8B,IAAQ9B,EAAO,IAAI,CAAKS,MAAAlB;AAAA,MAC1BH,EAAA,MAAKI,GAAQ,WAAYiB,EAAE,IAAI;AAAA,MAC/B;AAAA,QACI,SAAS;AAAA,QACT,QAAQA;AAAA,MACZ;AAAA,IAAA,CACH,GAEKN,IAAY4B,EAAeD,EAAM,IAAI,OAAKrB,EAAE,OAAA,CAAQ,GAAG,cAAc;AAE3E,oBAAS,iBAAiB,WAAW,CAASX,MAAAkC,EAAUlC,CAAK,CAAC,GAC9DK,EAAU,iBAAiB,WAAW,CAASL,MAAAkC,EAAUlC,CAAK,CAAC,GAExDK;AAEP,aAAS6B,EAAUlC,GAAsB;AACrC,UAAIA,EAAM,OAAO,eAAeA,EAAM,OAAO,WAAW;AAC9C,cAAAO,IAAaP,EAAM,OAAO,aAE1BM,IAAgB,SAAS;AACX,QAAAF,EAAAC,GAAWC,GAAeC,CAAU,GACxDP,EAAM,gBAAgB;AAAA,MAC1B;AAAA,IACJ;AAAA,EACJ;AACJ;AAzDIN,IAAA,eAqBAiC,IAAA;","x_google_ignoreList":[0]}